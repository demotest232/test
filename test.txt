// Build SSL context using HttpClient5 API
SSLContext sslContext = SSLContextBuilder.create()
    .loadKeyMaterial(keyStore, password)       // supply your keystore and password
    .loadTrustMaterial(new TrustAllStrategy()) // use TrustAllStrategy or your custom one
    .build();

// NoopHostnameVerifier
NoopHostnameVerifier noopVerifier = NoopHostnameVerifier.INSTANCE;

// Build HttpClient5
HttpClient httpClient = HttpClients.custom()
    .setSSLContext(sslContext)
    .setSSLHostnameVerifier(noopVerifier)
    .build();

// Create the request factory with HttpClient5
HttpComponentsClientHttpRequestFactory requestFactory =
    new HttpComponentsClientHttpRequestFactory(httpClient);

// Finally, create RestTemplate with the request factory
RestTemplate restTemplate = new RestTemplate(requestFactory);
