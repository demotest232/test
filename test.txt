 // Detect rename/move: files with same SHA but different path
    Map<String, Set<String>> shaToPathsTag1 = new HashMap<>();
    for (Map.Entry<String, String> entry : shaInTag1.entrySet()) {
        shaToPathsTag1.computeIfAbsent(entry.getValue(), k -> new HashSet<>()).add(entry.getKey());
    }
    Map<String, Set<String>> shaToPathsTag2 = new HashMap<>();
    for (Map.Entry<String, String> entry : shaInTag2.entrySet()) {
        shaToPathsTag2.computeIfAbsent(entry.getValue(), k -> new HashSet<>()).add(entry.getKey());
    }

    // For SHAs existing in both, check if paths differ â€“ potential rename/move
    for (String sha : shaToPathsTag1.keySet()) {
        if (shaToPathsTag2.containsKey(sha)) {
            Set<String> paths1 = shaToPathsTag1.get(sha);
            Set<String> paths2 = shaToPathsTag2.get(sha);
            if (!paths1.equals(paths2)) {
                // Add all different paths in tag2 that don't exist in tag1 to modified
                for (String path2 : paths2) {
                    if (!paths1.contains(path2)) {
                        modified.add(path2);
                    }
                }
            }
        }
    }
