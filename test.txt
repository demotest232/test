@Test
    void testDoFilter_WithGzip_Header() throws IOException, ServletException {
        Enumeration<String> gzipEnum = Collections.enumeration(Collections.singletonList("gzip"));
        when(mockRequest.getHeaders("Accept-Encoding")).thenReturn(gzipEnum);

        ArgumentCaptor<ServletResponse> responseCaptor = ArgumentCaptor.forClass(ServletResponse.class);

        filter.doFilter(mockRequest, mockResponse, mockChain);

        verify(mockChain).doFilter(eq(mockRequest), responseCaptor.capture());

        ServletResponse wrappedResponse = responseCaptor.getValue();
        assertTrue(wrappedResponse instanceof HttpServletResponseWrapper);

       
        wrappedResponse.getOutputStream();
        wrappedResponse.getWriter();
    }
