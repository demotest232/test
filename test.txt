// Exclude files in "excludedFolders"
    if (excludedFolders != null) {
        List<String> excludes = Arrays.asList(excludedFolders);
        Predicate<String> notExcluded = path ->
            excludes.stream().noneMatch(path::contains);

        // Apply exclusion filter to all sets
        added = added.stream().filter(notExcluded).collect(Collectors.toSet());
        removed = removed.stream().filter(notExcluded).collect(Collectors.toSet());
        modified = modified.stream().filter(notExcluded).collect(Collectors.toSet());
    }

    // Add results to filesModified if needed, or process as required
    filesModified.addAll(added);
    filesModified.addAll(removed);
    filesModified.addAll(modified);

    return filesModified;
