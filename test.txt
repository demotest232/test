// Create SSL socket factory with NoopHostnameVerifier
SSLConnectionSocketFactory socketFactory = SSLConnectionSocketFactoryBuilder.create()
    .setSslContext(sslContext)
    .setHostnameVerifier(NoopHostnameVerifier.INSTANCE)
    .build();

// Build connection manager using the custom socket factory
PoolingHttpClientConnectionManager connectionManager = PoolingHttpClientConnectionManagerBuilder.create()
    .setSSLSocketFactory(socketFactory)
    .build();

// Build the HttpClient
CloseableHttpClient httpClient = HttpClients.custom()
    .setConnectionManager(connectionManager)
    .build();

// Create the request factory with HttpClient5
HttpComponentsClientHttpRequestFactory requestFactory =
    new HttpComponentsClientHttpRequestFactory(httpClient);

// Finally, create RestTemplate with the request factory
RestTemplate restTemplate = new RestTemplate(requestFactory);
