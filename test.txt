 @Test
    void tokenReceived_shouldInjectToken() {
        // Arrange
        MockServletContext servletContext = new MockServletContext();
     
        WebApplicationContext wac = Mockito.mock(WebApplicationContext.class);
        AuthTokenConsumer springBean = Mockito.mock(AuthTokenConsumer.class);
        Mockito.when(wac.getBean(AuthTokenConsumer.class)).thenReturn(springBean);

        servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, wac);

        AuthTokenToRequestScope consumer = new AuthTokenToRequestScope(servletContext);

        // Act
        consumer.tokenReceived("dummy-token");

        // Assert: Token should be passed to the AuthTokenConsumer bean
        Mockito.verify(springBean).tokenReceived("dummy-token");
    }
