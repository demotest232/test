$scope.allowedDomains = [
  "citi.com",
  "ssmb.com",
  "imcnam.ssmb.com",
  "iuo.citi.com",
  "imceu.eu.ssmb.com"
];

$scope.emailPattern = /^[a-zA-Z0-9._%+-]+@([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/;

$scope.isEmailValid = function(email) {
  if (!email || !$scope.emailPattern.test(email)) {
    return false;
  }
  var domain = email.split('@')[1];
  return $scope.allowedDomains.includes(domain);
};

if (!$scope.isEmailValid(data.email)) {
    functions.alert("error", "Invalid Email address", function () {});
    return;  // Stop here if invalid email
}
